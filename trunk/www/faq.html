<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style type="text/css"> /* <![CDATA[ */
  @import "tigris-branding/css/tigris.css";
  @import "tigris-branding/css/inst.css";
  /* ]]> */</style>
<link rel="stylesheet" type="text/css" media="print"
  href="tigris-branding/css/print.css"/>
<script type="text/javascript" src="tigris-branding/scripts/tigris.js"></script>
<title>cvs2svn FAQ</title>
</head>

<body id="bodycol">
<div class="app">

<h1>cvs2svn FAQ</h1>

<p><strong>How-to:</strong></p>

<ol>

  <li><a href="#oneatatime">How can I convert my CVS repository one module at a time?</a></li>

  <li><a href="#inverted">How can I convert project <tt>foo</tt> so
    that <tt>trunk/tags/branches</tt> are inside of
    <tt>foo</tt>?</a></li>

</ol>

<hr />

<h2>How-to:</h2>

<h3><a name="oneatatime" title="#oneatatime">How can I convert my CVS repository one module at a time?</a></h3>

<p>If you need to convert certain CVS modules (in one large
repository) to Subversion
<b>now</b> and other modules <b>later</b>, you may want to convert
your repository one module at a time.  This situation is typically
encountered in large organizations where each project has a separate
lifecycle and schedule, and a one-step conversion process is not
practical.
</p>

<p>To incrementally migrate modules contained within a CVS repository
to Subversion you will need to use cvs2svn to create a "dumpfile".
Then, using <tt>svnadmin</tt> you will load the dumpfile into a
project directory created within the Subversion repository.  For
example:
</p>

<ol>
  <li>If the svn repository doesn't already exist, create it:
    <pre>
      svnadmin create file:///path/to/svnrepos
    </pre></li>

  <li>Remember to <b>Make a backup</b> before starting.  Never run
    cvs2svn on a live CVS repository--always work on a copy of your
    repository.</li>

  <li>Run cvs2svn against one of the modules you want converted:
    <pre>
      # Copy the CVS modules into a temporary cvs repository.
      # This is not absolutely necessary, but it's for safety's sake.
      $ mkdir ~/newcvsrepo
      $ mkdir ~/newcvsrepo/CVSROOT # needed by cvs2svn --use-cvs
      $ cp -r /oldcvsrepo/projectA ~/newcvsrepo

      # Create a dumpfile containing the new CVS repository contents
      $ mkdir ~/svndump; cd ~/svndump
      $ cvs2svn --dump-only ~/newcvsrepo/projectA
    </pre></li>


  <li>Import the dump into the Subversion repository:
    <pre>
      # Make a directory for the project.
      $ svn mkdir file:///path/to/svnrepos/projectA -m "Added projectA directory."

      # Use "svnadmin load" to load the dumpfile.
      $ cd ~/svndump
      $ svnadmin --parent-dir projectA load /path/to/svnrepo &lt; cvs2svn-dump
    </pre></li>

  <li>Repeat steps 3 and 4 for each module you want to convert.</li>

</ol>


<h3><a name="inverted" title="#inverted">How can I convert project <tt>foo</tt> so
    that <tt>trunk/tags/branches</tt> are inside of
    <tt>foo</tt>?</a></h3>

  <p>Given a CVS repository with the layout:</p>

<pre>
  /project_a
  /project_b
</pre>

  <p>cvs2svn will produce a Subversion repository with the following
    layout:</p>

<pre>
   trunk/
      project_a/
         ...
      project_b/
         ...
   tags/
      ...
   branches/
      ...
</pre>

  <p>However, you may want your Subversion repository to be laid out
    like this:</p>

<pre>
   project_a/
      trunk/
         ...
      branches/
         ...
      tags/
         ...
   project_b/
      trunk/
         ...
      branches/
         ...
      tags/
         ...
</pre>

  <p>Currently, cvs2svn does not support converting a repository in
    this manner (see <a
    href="http://cvs2svn.tigris.org/issues/show_bug.cgi?id=86">Issue
    #86</a> for details), however, there is a workaround.  You can
    convert your repository one project (or module) at a time and load
    the individual dumpfiles into your Subversion repository using
    <tt>svnadmin</tt> with the <tt>--parent-dir</tt> switch.  See the
    answer to <a href="#oneatatime">How can I convert my CVS
    repository one module at a time?</a> for details.</p>

</div>
</body>
</html>
